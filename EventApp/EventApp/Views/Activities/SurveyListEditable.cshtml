@using EventApp.Models
@model EventApp.Models.SurveyActivityQuestion
@using System.Globalization;
@{
    ViewBag.Title = "Anketler";

    List<Activity> ThisSurveys = (List<Activity>)ViewData["SurveyList"];
    List<EventActivity> ThisEventSurvey = (List<EventActivity>)ViewData["EventSurveyList"];
    int count = ThisSurveys.Count;
}

<script src="~/scripts/jquery-1.10.2.min.js"></script>

<script type="text/javascript">

    $(document).ready(function () {
        $("#id").change(function () {
            var type = $("#id").val();
            $("#back-btn").attr("href", "/Map/Delete?id=" + type);
        });

        $("#id").change(function () {
            var type = $("#id").val();
            $("#back-btn").attr("href", "/Map/Delete?id=" + type);
        });


        $(".delete-type5").click(function () {
            var hidden = $(this).attr("data-td");
            $("." + hidden).slideToggle(200);
        });

    });

</script>

<div class="page-content-wrapper">
    <!-- BEGIN CONTENT BODY -->
    <div class="page-content">
        <div class="page-bar">
            <ul class="page-breadcrumb">
                <li>
                    <a href="@Url.Action("SurveyListEditable", "Activities")">Anketler</a>
                </li>
            </ul>
        </div>
        <h1 class="page-title" style="float: left;">
            Anketler
            <small>Ekle-Düzenle-Sil</small>
        </h1>
        <a href="@Url.Action("CreateSurvey", "Activities")" id="continue-btn" class="btn green radiochange4" style="float: right; margin-top: 20px;">
            Yeni Anket Ekle
            <i class="fa fa-plus"></i>
        </a>

        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="portlet light portlet-fit bordered" style="border-bottom: 0 !important;">
                    <div class="portlet box green">
                        <div class="portlet-title">
                            <div class="caption">
                                <i class=" icon-layers font-white"></i>
                                <span class="caption-subject font-white sbold">Anket Listesi</span>
                            </div>
                        </div>
                        <div class="portlet-body">
                            @{
                                if (count > 0)
                                {
                                    <table class="table table-striped table-hover table-bordered">
                                        <thead>
                                            <tr>
                                                <th> Anket </th>
                                                <th style="text-align:center; width: 80px;"> Düzenle </th>
                                                <th style="text-align:center; width: 80px;"> Yayınla </th>
                                                <th style="text-align:center; width: 80px;"> Kaldır </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @{
                                                for (int i = 0; i < count; i++)
                                                {
                                                    String hidden = "hidden-td1" + (i + 1);
                                                    <tr>
                                                        @{
                                                            if (ThisEventSurvey[i].IsActive == true)
                                                            {
                                                                <td>
                                                                    <a href="@Url.Action("SurveyDisplayOrg", "Activities", new { SurveyEventID = ThisEventSurvey[i].Id})">
                                                                        @ThisSurveys[i].Name
                                                                    </a>
                                                                </td>
                                                                <td style="text-align:center; cursor:default;">
                                                                    <i class="fa fa-pencil"></i>
                                                                </td>
                                                                <td style="text-align:center; color: #23527c; cursor:default;">
                                                                    <i class="fa fa-check-square-o"></i>
                                                                </td>
                                                                <td style="text-align:center; cursor:pointer;">
                                                                    <a href="@Url.Action("UnscrambleSurvey", "Activities", new { SurveyEventID = ThisEventSurvey[i].Id})">
                                                                        Kaldır
                                                                    </a>
                                                                </td>
                                                            }
                                                            else
                                                            {
                                                                <td style="vertical-align: middle;">
                                                                    <a href="@Url.Action("SurveyDisplayOrg", "Activities", new { SurveyEventID = ThisEventSurvey[i].Id})">
                                                                        @ThisSurveys[i].Name
                                                                        <a href="" style="color: #ed6b75; cursor: default;">
                                                                            (Yayında Değil)
                                                                        </a>
                                                                    </a>
                                                                </td>
                                                                <td style="text-align:center; cursor:pointer;">  
                                                                    @{ 
                                                                        Session["ToEditSurvey"] = "SurveyListEditable";
                                                                    }                                                                 
                                                                    <a href="@Url.Action("EditSurvey", "Activities", new { SurveyEventID = ThisEventSurvey[i].Id})">
                                                                        Düzenle
                                                                    </a>
                                                                </td>
                                                                <td style="text-align:center; cursor:pointer; vertical-align: middle;">
                                                                    <a href="@Url.Action("PublishSurvey", "Activities", new { SurveyEventID = ThisEventSurvey[i].Id})">
                                                                        Yayınla
                                                                    </a>
                                                                </td>
                                                                <td class="delete-type5" data-td="@hidden" style="text-align:center; vertical-align: middle;">
                                                                    <a style="color: #ed6b75;">
                                                                        Kalıcı Sil
                                                                    </a>
                                                                </td>

                                                            }
                                                        }
                                                    </tr>
                                                    <tr>
                                                        <td class="display-none @hidden">
                                                            <div style="float: left; margin-top: 8px;">
                                                                @ThisSurveys[i].Name silmek istediğinize emin misiniz?
                                                            </div>
                                                        </td>
                                                        <td class="display-none @hidden"></td>
                                                        <td class="display-none @hidden">
                                                            <a href="/ActivityListEditable/Activities" id="continue-btn" class="btn btn-default pull-right" style="text-align:center; margin:0px; margin-right: 8px; border-color: #36c6d3; color: #36c6d3"> Hayır </a>
                                                        </td>
                                                        <td class="display-none @hidden">
                                                            <a class="btn btn-default green" style="margin-left: 8px; margin-right: 0px;" href="@Url.Action("DeleteSurveyPermanently", "Activities", new { SurveyEventID = ThisEventSurvey[i].Id})">
                                                                Evet
                                                            </a>
                                                        </td>
                                                    </tr>
                                                            }
                                            }
                                        
                                        </tbody>
                                    </table>
                                                }
                            }
                            <a href="@Url.Action("CreateSurvey", "Activities")" id="continue-btn" class="btn btn-outline green button-next">
                                Yeni Anket Ekle
                                <i class="fa fa-plus"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>


<!-- BEGIN CORE PLUGINS -->
<script src="../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="../assets/global/scripts/datatable.js" type="text/javascript"></script>
<script src="../assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="../assets/global/scripts/app.min.js" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="../assets/pages/scripts/table-datatables-editable.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="../assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="../assets/layouts/layout/scripts/demo.min.js" type="text/javascript"></script>
<script src="../assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->

