@using EventApp.Models
@model EventApp.Models.UserCheckIn
@using System.Globalization;

@{
    ViewBag.Title = "Oteller";

    List<OtelGuest> OtelGuest = (List<OtelGuest>)ViewData["GuestList"];
    UserOtel ThisUser = (UserOtel)ViewData["UserOtel"];
    string OtelName = (string)ViewData["OtelName"];
    User UserInfo = (User)ViewData["UserName"];
    string Stages = (string)ViewData["Status"];
    UserCheckIn CheckedUser = (UserCheckIn)ViewData["CheckedUser"];
    List<bool> CheckedInGuest = (List<bool>)ViewData["CheckedInGuest"];
    List<UserCheckIn> GuestCheckInList = (List<UserCheckIn>)ViewData["GuestCheckInList"];
}

<script src="~/scripts/jquery-1.10.2.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $("#id").change(function () {
            var type = $("#id").val();
            $("#back-btn").attr("href", "/Otel/Delete?id=" + type);
        });

        $("#id").change(function () {
            var type = $("#id").val();
            $("#back-btn").attr("href", "/Otel/Delete?id=" + type);
        });

    });
</script>

<div class="page-content-wrapper">
    <div class="page-content">
        <div class="page-bar">
            <ul class="page-breadcrumb">
                <li>
                    <a href="@Url.Action("OtelsEditable", "Events")">Oteller</a>
                    <i class="fa fa-circle"></i>
                </li>
                <li>
                    <a href="@Url.Action("OtelRegistrationList", "Events")">Konaklama Listesi</a>
                    <i class="fa fa-circle"></i>
                </li>
                <li>
                    <span>@UserInfo.Name @UserInfo.Surname</span>
                </li>
            </ul>
        </div>

        <h1 class="page-title" style="float: left;">
            @UserInfo.Name @UserInfo.Surname
            <small>Konaklama Bilgileri</small>
        </h1>
        <a href="@Url.Action("CancelReservationOrg","Events", new { UserOtelID = ThisUser.Id})" id="continue-btn" class="btn btn-outline green button-next" style="float: right; margin-top: 20px; border-color: #ed6b75; background-color: #ed6b75; color: white; margin-right: 10px;">
            Bu Kaydı Sil
            <i class="fa fa-times"></i>
        </a>
        <a href="@Url.Action("OtelRegistrationList", "Events")" id="continue-btn" class="btn success green button-next" style="float: right; margin-top: 20px; margin-right: 10px;">
            <i class="fa fa-arrow-circle-left"></i>
            Geri
        </a>

        

        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">
                <div class="portlet light portlet-fit bordered" style="border-bottom: 0 !important;">
                    <div class="portlet box green">
                        <div class="portlet-title">
                            <div class="caption">
                                <i class="icon-layers font-white"></i>
                                <span class="caption-subject font-white sbold">@UserInfo.Name @UserInfo.Surname Konaklama Bilgileri</span>
                            </div>
                        </div>
                        <div class="portlet-body">
                            @using (Html.BeginForm("", "", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                                @Html.AntiForgeryToken()
                                <div class="form-horizontal">

                                    <div class="form-group">
                                        <label class="control-label col-md-3" style="padding-top: 0;"> Kayıt Durumu </label>
                                        @{
                                            if (Stages == "stage1")
                                            {
                                                <div class="col-md-4">
                                                    Rezervasyon yapılmalı...
                                                </div>
                                                <div class="col-md-5">
                                                    <a href="@Url.Action("ChangetoReservation","Events", new { UserOtelID = ThisUser.Id })" id="continue-btn" class="btn btn-success" style="background-color: #ed6b75; border-color: #ed6b75; color: white;">
                                                        Rezervasyon Yapıldı Olarak Değiştir
                                                    </a>
                                                </div>
                                            }
                                            else if (Stages == "stage2")
                                            {
                                                <div class="col-md-6">
                                                    Rezervasyon gerçekleştirildi, Check-In bilgileri bekleniyor...
                                                </div>
                                            }
                                            else if (Stages == "stage3")
                                            {
                                                String deleteotel = "hidden-td1";
                                                <div class="editDeleteButtons2">
                                                    <div class="col-md-4">
                                                        Check-In yapılmalı...
                                                    </div>
                                                    <div class="col-md-5 col-xs-12 editDeleteButtons3">
                                                        <a href="@Url.Action("ChangeToCheckIn","Events", new { CheckInID = ThisUser.Id, UserOtelID = ThisUser.Id, User = "UserOtel" })" id="continue-btn" class="btn btn-success" style="background-color: #ed6b75; border-color: #ed6b75; color: white;">
                                                            Check-In Yapıldı Olarak Değiştir
                                                        </a>
                                                        <a data-td="@deleteotel" onclick="$(this).parent().slideUp(200); $('.editDeleteConfirm2,.revisionButtons').slideDown(200); " id="continue-btn" class="btn success green button-next">
                                                            Revizyon İste
                                                        </a>
                                                    </div>
                                                </div>
                                                
                                                <div class="display-none editDeleteConfirm2 @deleteotel">
                                                    <div class="col-md-5" style="float: right; text-align: right;">
                                                        Check-In bilgileri silinecek. Onaylıyor musunuz?
                                                    </div>
                                                    <div class="col-md-4 col-md-offset-8 col-xs-12 revisionButtons" style="margin-top: 5px;">
                                                        <a href="@Url.Action("ReTypeCheckInOrg", "Events", new { UserID = ThisUser.Id, UserOtelID = ThisUser.Id, user = "UserOtel" })" class="btn btn-success" style="background-color: #ed6b75; border-color: #ed6b75; color: white; float: right; margin-left: 10px;">Evet</a>
                                                        <div onclick="$(this).parent().hide(200); $('.editDeleteConfirm2').hide(200); $('.editDeleteButtons2,.editDeleteButtons3').slideDown(200);" type="button" class="btn green" style="float: right;">
                                                            Hayır
                                                        </div>
                                                    </div>                                                    
                                                </div>
                                            }
                                            else if (Stages == "stage4")
                                            {
                                                <div class="col-md-6">
                                                    Check-In yapıldı 
                                                    <i class="icon-check"></i>
                                                </div>
                                            }
                                        }
                                                                              
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label col-md-3" style="padding-top: 0;"> Otel </label>
                                        <div class="col-md-6">
                                            @OtelName
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label col-md-3" style="padding-top: 0;"> Check-In / Check-Out </label>
                                        <div class="col-md-6">
                                            @ThisUser.CheckInStr - @ThisUser.CheckOutStr
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label col-md-3" style="padding-top: 0;"> İsim Soyisim </label>
                                        <div class="col-md-6">
                                            @UserInfo.Name @UserInfo.Surname
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label col-md-3" style="padding-top: 0;"> Telefon Numarası </label>
                                        <div class="col-md-6">
                                            (+@UserInfo.CountryPhoneCode) @UserInfo.Phone
                                        </div>
                                    </div>

                                    @{
                                        if (Stages == "stage3" || Stages == "stage4")
                                        {
                                            String FrontPhoto = "../Images/CheckIn/" + CheckedUser.Id + "0.jpg";
                                            String BackPhoto = "../Images/CheckIn/" + CheckedUser.Id + "1.jpg";

                                            <div class="form-group">
                                                @{
                                                    if (CheckedUser.IDCardFrontEnd == "Valid" && CheckedUser.IDCardBackEnd == "Valid")
                                                    {
                                                        <div class="photo col-md-6 col-sm-6 col-xs-6">
                                                            <img src="@FrontPhoto" style="width: 200px; height: 250px; margin-bottom: 10px; float: right;" class="img-responsive" alt="">
                                                        </div>
                                                        <div class="photo col-md-6 col-sm-6 col-xs-6">
                                                            <img src="@BackPhoto" style="width: 200px; height: 250px; margin-bottom: 10px;" class="img-responsive" alt="">
                                                        </div>
                                                    }
                                                    else if (CheckedUser.IDCardFrontEnd == "Valid" && CheckedUser.IDCardBackEnd != "Valid")
                                                    {
                                                        <div class="photo col-md-offset-3 col-sm-offset-3 col-xs-offset-3 col-md-6 col-sm-6 col-xs-6">
                                                            <img src="@FrontPhoto" style="width: 400px; height: 250px; margin-bottom: 10px;" class="img-responsive" alt="">
                                                        </div>
                                                    }
                                                }
                                            </div>
                                        }
                                    }

                                    @{
                                        if (OtelGuest.Count > 0)
                                        {
                                            for (int i = 0; i < OtelGuest.Count; i++)
                                            {
                                                string ID = OtelGuest[i].Id.ToString();
                                                string DelButton = "editDeleteButtons" + ID;
                                                string DelButtonA = ".editDeleteButtons" + ID;
                                                string DelButton2 = ".editDeleteButtons" + ID + OtelGuest[i].Name;
                                                string DelButton22 = "editDeleteButtons" + ID + OtelGuest[i].Name;
                                                string DelButton3 = ".editDeleteButtons" + ID + OtelGuest[i].Surname;
                                                string revisionButtons = ".revisionButtons" + ID;
                                                string revisionButtons2 = "revisionButtons" + ID;
                                                string editDeleteConfirm2 = ".editDeleteConfirm2" + ID;
                                                string editDeleteConfirm22 = "editDeleteConfirm2" + ID;
                                                int count = i + 1;
                                                <div style="border-bottom: 2px solid #b7b5b5; padding-top: 20px; padding-bottom: 5px;"></div>
                                                <div class="col-md-offset-3">
                                                    <h4 class="block" style="margin-top: 0;">@count. Misafir Bilgileri</h4>
                                                </div>

                                                if (OtelGuest[i].Reservation == true && OtelGuest[i].CheckIn == false && CheckedInGuest[i] == true)
                                                {
                                                    <div class="form-group">
                                                        <label class="control-label col-md-3" style="padding-top: 0;"> Kayıt Durumu </label>

                                                        @{
                                                            String deleteotel = "hidden-td1" + OtelGuest[i].Name + OtelGuest[i].Surname;
                                                            <div class="@DelButton22">
                                                                <div class="col-md-4">
                                                                    Check-In yapılmalı...
                                                                </div>
                                                                <div class="col-md-5 col-xs-12 @DelButton">
                                                                    <a href="@Url.Action("ChangeToCheckIn","Events", new { CheckInID = OtelGuest[i].Id, UserOtelID = ThisUser.Id, Guest = "GuestOtel" })" id="continue-btn" class="btn btn-success" style="background-color: #ed6b75; border-color: #ed6b75; color: white;">
                                                                        Check-In Yapıldı Olarak Değiştir
                                                                    </a>
                                                                    <a data-td="@deleteotel" onclick="$(this).parent().slideUp(200); $('@editDeleteConfirm2,@revisionButtons').slideDown(200); " id="continue-btn" class="btn success green button-next">
                                                                        Revizyon İste
                                                                    </a>
                                                                </div>
                                                            </div>

                                                            <div class="display-none @editDeleteConfirm22 @deleteotel">
                                                                <div class="col-md-5" style="float: right; text-align: right;">
                                                                    Check-In bilgileri silinecek. Onaylıyor musunuz?
                                                                </div>
                                                                <div class="col-md-4 col-md-offset-8 col-xs-12 @revisionButtons2" style="margin-top: 5px;">
                                                                    <a href="@Url.Action("ReTypeCheckInOrg", "Events", new { UserID = OtelGuest[i].Id, UserOtelID = ThisUser.Id, guest = "OtelGuest" })" class="btn btn-success" style="background-color: #ed6b75; border-color: #ed6b75; color: white; float: right; margin-left: 10px;">Evet</a>
                                                                    <div onclick="$(this).parent().hide(200); $('@editDeleteConfirm2').hide(200); $('@DelButton2,@DelButtonA').slideDown(200);" type="button" class="btn green" style="float: right;">
                                                                        Hayır
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                    </div>
                                                }
                                                else if (OtelGuest[i].Reservation == true && OtelGuest[i].CheckIn == false && CheckedInGuest[i] == false)
                                                {
                                                    <div class="form-group">
                                                        <label class="control-label col-md-3" style="padding-top: 0;"> Kayıt Durumu </label>
                                                        <div class="col-md-4">
                                                            Rezervasyon gerçekleştirildi, Check-In bilgileri bekleniyor...
                                                        </div>
                                                    </div>                                           
                                                }
                                                else if (OtelGuest[i].Reservation == true && OtelGuest[i].CheckIn == true && CheckedInGuest[i] == true)
                                                {
                                                    <div class="form-group">
                                                        <label class="control-label col-md-3" style="padding-top: 0;"> Kayıt Durumu </label>
                                                        <div class="col-md-6">
                                                            Check-In yapıldı
                                                            <i class="icon-check"></i>
                                                        </div>
                                                    </div>   
                                                }

                                                if (GuestCheckInList[i].Id.ToString() != "00000000-0000-0000-0000-000000000000")
                                                {
                                                    <div class="form-group">
                                                        <label class="control-label col-md-3" style="padding-top: 0;"> İsim Soyisim </label>
                                                        <div class="col-md-6">
                                                            @GuestCheckInList[i].Name @GuestCheckInList[i].Surname
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-md-3" style="padding-top: 0;"> E-Posta Adresi </label>
                                                        <div class="col-md-6">
                                                            @GuestCheckInList[i].Mail
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-md-3" style="padding-top: 0;"> Telefon Numarası </label>
                                                        <div class="col-md-6">
                                                            (+@GuestCheckInList[i].CountryPhoneCode) @GuestCheckInList[i].Phone
                                                        </div>
                                                    </div>
                                                        }
                                                        else
                                                        {
                                                            <div class="form-group">
                                                                <label class="control-label col-md-3" style="padding-top: 0;"> İsim Soyisim </label>
                                                                <div class="col-md-6">
                                                                    @OtelGuest[i].Name @OtelGuest[i].Surname
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="control-label col-md-3" style="padding-top: 0;"> E-Posta Adresi </label>
                                                                <div class="col-md-6">
                                                                    @OtelGuest[i].Mail
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="control-label col-md-3" style="padding-top: 0;"> Telefon Numarası </label>
                                                                @{
                                                                    if (OtelGuest[i].Phone == null)
                                                                    {
                                                                        <div class="col-md-6">
                                                                            -
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="col-md-6">
                                                                            @OtelGuest[i].CountryPhoneCode @OtelGuest[i].Phone
                                                                        </div>

                                                                    }
                                                                }
                                                            </div>
                                                        }


                                                        if (CheckedInGuest[i] == true)
                                                        {
                                                            String FrontPhoto = "../Images/CheckIn/" + GuestCheckInList[i].Id + "0.jpg";
                                                            String BackPhoto = "../Images/CheckIn/" + GuestCheckInList[i].Id + "1.jpg";

                                                    <div class="form-group">
                                                        @{
                                                            if (GuestCheckInList[i].IDCardFrontEnd == "Valid" && GuestCheckInList[i].IDCardBackEnd == "Valid")
                                                            {
                                                                <div class="photo col-md-6 col-sm-6 col-xs-6">
                                                                    <img src="@FrontPhoto" style="width: 200px; height: 250px; margin-bottom: 10px; float: right;" class="img-responsive" alt="">
                                                                </div>
                                                                <div class="photo col-md-6 col-sm-6 col-xs-6">
                                                                    <img src="@BackPhoto" style="width: 200px; height: 250px; margin-bottom: 10px;" class="img-responsive" alt="">
                                                                </div>
                                                            }
                                                            else if (GuestCheckInList[i].IDCardFrontEnd == "Valid" && GuestCheckInList[i].IDCardBackEnd != "Valid")
                                                            {
                                                                <div class="photo col-md-offset-3 col-sm-offset-3 col-xs-offset-3 col-md-6 col-sm-6 col-xs-6">
                                                                    <img src="@FrontPhoto" style="width: 400px; height: 250px; margin-bottom: 10px; float: right;" class="img-responsive" alt="">
                                                                </div>
                                                            }
                                                        }
                                                    </div>
                                                }
                                            }
                                        }
                                    }

                                </div>

                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- BEGIN CORE PLUGINS -->
<script src="../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->

<script src="../assets/global/plugins/moment.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/clockface/js/clockface.js" type="text/javascript"></script>

<script src="../assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/jquery-validation/js/additional-methods.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js" type="text/javascript"></script>

<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="../assets/global/scripts/app.min.js" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="../assets/pages/scripts/form-wizard.min.js" type="text/javascript"></script>

<script src="../assets/pages/scripts/components-date-time-pickers.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="../assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="../assets/layouts/layout/scripts/demo.min.js" type="text/javascript"></script>
<script src="../assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->
