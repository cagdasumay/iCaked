@model EventApp.Models.Old_Map
@using EventApp.Models



@{ 
    List<Old_Map> MapList = (List<Old_Map>)Session["MpsList"];
    Old_Map map = (Old_Map)Session["deletemap"];
}

<script src="~/scripts/jquery-1.10.2.min.js"></script>

<script type="text/javascript">

        $(document).ready(function () {
            $("#id").change(function () {
                var type = $("#id").val();
                $("#back-btn").attr("href", "/Maps/Delete?id=" + type);
            });

            $("#id").change(function () {
                var type = $("#id").val();
                $("#back-btn").attr("href", "/Maps/Delete?id=" + type);
            });

            setTimeout(function () { $(this).scrollTop(0); }, 1);
            
            $(".delete-type1").click(function () {
                var hidden = $(this).attr("data-td");
                $("." + hidden).slideToggle(200);
            });
        });

</script>

<div class="page-content-wrapper">
    <!-- BEGIN CONTENT BODY -->
    <div class="page-content">
        <!-- BEGIN PAGE HEADER-->

        <!-- BEGIN PAGE BAR -->
        <div class="page-bar">
            <ul class="page-breadcrumb">
                <li>
                    <a href="index.html">Maps</a>
                </li>
            </ul>
        </div>
        <!-- END PAGE BAR -->
        <!-- BEGIN PAGE TITLE-->
        <h1 class="page-title">
            Maps
            <small>Add Maps & Map List</small>
        </h1>
        <!-- END PAGE TITLE-->
        <!-- END PAGE HEADER-->
        <div class="row">
            <div class="col-md-12">
                <!-- BEGIN EXAMPLE TABLE PORTLET-->
                <div class="portlet light portlet-fit bordered">

                    
                        <div class="portlet-body">
                        @using (Html.BeginForm("MapCreate", "Map", FormMethod.Post, new { enctype = "multipart/form-data" }))
                        {
                            @Html.AntiForgeryToken()
                            <div class="table-toolbar">
                                <div class="row">
                                    <div class="col-md-4 col-sm-4 col-xs-6" style="padding: 0px 5px; margin-bottom: 8px;">
                                        @*<label class="control-label visible-ie8 visible-ie9">Password</label>*@
                                        <input class="form-control form-control-solid placeholder-no-fix btn green" type="file" id="uploadedmap" name="uploadedmap" />
                                    </div>
                                    <div class="col-md-4 col-sm-4 col-xs-6" style="padding: 0px 5px;">
                                        @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @placeholder = "Enter Map Name", @class = "form-control green btn-outline pull-left", @style = "color: #36c6d3" } })
                                        @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-md-4 col-sm-4 col-xs-12" style="padding: 0px 5px;">
                                        <button type="submit" id="register-submit-btn" class="btn green btn-outline pull-left">Add</button>
                                    </div>
                                </div>
                            </div>

                        }


                            @{
                                int mapp = MapList.Count;
                                <table class="table table-striped table-hover table-bordered">
                                    <thead>
                                        <tr>
                                            <th> Map </th>
                                            <th style="text-align:center; width: 80px;"> Delete </th>
                                        </tr>
                                    </thead>
                                    <tbody>


                                        @{
                                            for (int i = 0; i < mapp; i++)
                                            {
                                                String hidden = "hidden-td" + (i+1);
                                                <tr>
                                                    <td>
                                                        <a href="@Url.Action("MapDetails","Map",new { mapdet = @MapList[i].Id })">
                                                            @MapList[i].Name
                                                        </a>
                                                    </td>
                                                    @*<td> @MapList[i].Name </td>*@
                                                    <td class="pull-left-right delete-type1" data-td="@hidden" style="text-align:center; cursor:pointer;"> Delete </td>
                                                </tr>

                                                // Burası delete için

                                                using (Html.BeginForm())
                                                {
                                                    @Html.AntiForgeryToken()
                                                    <tr>
                                                        <td class="display-none @hidden">
                                                            <div style="float: left; margin-top: 8px;">
                                                                Are you sure to delete @MapList[i].Name?
                                                            </div>
                                                            <a href="/Map/MapCreate" id="continue-btn" class="btn btn-default pull-right" style="text-align:center; margin:0px; margin-right: 8px; border-color: #36c6d3; color: #36c6d3"> No </a>
                                                        </td>
                                                        <td class="display-none @hidden" >
                                                            <a class="btn btn-default green" style="margin-left: 8px; margin-right: 0px;" href="@Url.Action("DeleteApprove","Map",new { id = MapList[i].Id })">
                                                                Yes
                                                            </a>
                                                        </td>
                                                    </tr>
                                                }

                                            }
                                        }
                                        
                                    </tbody>
                                </table>
                            }
                            
                        </div>
                </div>
                <!-- END EXAMPLE TABLE PORTLET-->
            </div>
        </div>
    </div>
    <!-- END CONTENT BODY -->
</div>


<!-- BEGIN CORE PLUGINS -->
<script src="../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="../assets/global/scripts/datatable.js" type="text/javascript"></script>
<script src="../assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="../assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="../assets/global/scripts/app.min.js" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="../assets/pages/scripts/table-datatables-editable.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="../assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="../assets/layouts/layout/scripts/demo.min.js" type="text/javascript"></script>
<script src="../assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->

