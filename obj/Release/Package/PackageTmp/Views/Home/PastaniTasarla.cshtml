@using System.Data
@using Cake.Controllers
@using Cake.Models

@{
    ViewBag.Title = "Pastanı Tasarla – İster editör'de tasarla, ister resimli pastanı yap";
    ViewBag.Description = "Hayalinizdeki pastayı iCaked'in 3D online pasta tasarlama editörüyle, ister resimli pasta yaparak gerçeğe dönüştürün.";
    ViewBag.Keywords = "pasta tasarlama, resimli pasta, tasarım pasta siparişi, resimli doğumgünü pastası, doğum günü pastası, parti sepetleri, ankara tasarım pasta, istanbul pasta tasarım";
    Layout = "/Views/Shared/_Layout.cshtml";
    DatabaseController dc = new DatabaseController();
    UtilityController uc = new UtilityController();

    DataTable designs = dc.DBQueryGetter("select top 16 * from MadeCakes order by newid()");
}

<script>

    $(document).ready(function () {

        $(".introCitySelectButton").click(function () {
            $(this).fadeOut(400);
            var elem = this;
            setTimeout(function () {
                console.log($(this).parent());
                $(elem).parent().find(".cs-loader").fadeIn(400);
            }, 510);
        });

        $('.pt-slider').owlCarousel({
            items: 8,
            itemsTablet: [600, 6],
            itemsMobile: [479, 2],
            pagination: true,
            navigation: true,
            navigationText: [
              "<img src='/Images/Site/nav_left.png'  style='width:30px;' />",
              "<img src='/Images/Site/nav_right.png' style='width:30px;' />",
            ],

        });
    });

</script>

<style>

    .introCitySelect {
        opacity:1 !important;
    }

</style>

<div class="container-fluid">

    <div style="width:100%; float:left; text-align:center; margin:40px 0px;">
        <h1 style="width:100%; float:left; font-size:40px; padding-bottom:10px;">Pastanızı Online Tasarlayın</h1>
        <label style="width:100%; float:left;">Pasta tasarlama araçlarımızdan birini seçip pastanızı tasarlamaya başlayabilirsiniz !</label>
    </div>

    <div class="col-md-6 col-sm-6 col-xs-12 introBG" style="background:url('/Images/Site/editor_ornek_bg.png'); background-position:top center;">
        <div class="introCitySelect">
            <div style="width:100%; float:left; text-align:center; margin-top:50px;" class="cakeImgOrnek">
                <img src="~/Images/Site/editor_ornek.png" style="width:200px;" />
            </div>
            <h2 class="introCityLabel" style="margin-top:20px; font-size:30px;">Pasta Editörünü Kullanın</h2>
            <label class="introCityLabel2" style="font-size:16px; font-weight:500;">
                Pastanızı sıfırdan tüm detaylarıyla tasarlayıp seçtiğiniz pastaneden sipariş verin.
            </label>
            <div style="width:100%; float:left; text-align:center; margin-top:5%; transition:all 0.1s;">
                <a class="introCitySelectButton black-gradient" style="padding:20px 50px;" href="@Url.Action("Editor","Home")">DEVAM ET</a>
                <div class="cs-loader" style="display:none;">
                    <div class="cssload-container" style="width:100%;">
                        <div class="cssload-loading"><i></i><i></i><i></i><i></i></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-sm-6 col-xs-12 introBG" style="background:url('/Images/Site/editor_ornek_bg2.png'); background-position:top center;">
        <div class="introCitySelect">
            <div style="width:100%; float:left; text-align:center; margin-top:50px;" class="cakeImgOrnek">
                <img src="~/Images/Site/resimli_ornek.png" style="width:200px;" />
            </div>
            <h2 class="introCityLabel" style="margin-top:0px; font-size:30px;">Resimli Pasta Yapın</h2>
            <label class="introCityLabel2" style="font-size:16px; font-weight:500;">
                Seçtiğiniz pasta tabanına resminizi ekleyin ve hızlıca istediğiniz pastaneden sipariş verin.
            </label>
            <div style="width:100%; float:left; text-align:center; margin-top:5%; transition:all 0.1s;">
                <a class="introCitySelectButton black-gradient" style="padding:20px 50px;" href="@Url.Action("ResimliPasta","Home")">DEVAM ET</a>
                <div class="cs-loader" style="display:none;">
                    <div class="cssload-container" style="width:100%;">
                        <div class="cssload-loading"><i></i><i></i><i></i><i></i></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-12 col-sm-12 col-xs-12" style="padding-bottom:50px;">
        <h2 style="width:100%; float:left; font-size:30px; padding-bottom:30px; text-align:center; padding-top:50px;">Sizden Gelenler</h2>
        <div class="owl-carousel owl-theme pt-slider" style="float:left;">
            @{
                for (int i = 0; i < designs.Rows.Count; i++)
                {
                    DataRow design = designs.Rows[i];
                    String img = "/Images/MadeCakes/" + design["MadeID"] + "/designImg-275x275.png";

                    String designType = uc.cleanseUrlString(design["Type"].ToString().Replace("\r\n", ""));
                    String designName = uc.cleanseUrlString(design["Name"].ToString()) + "-" + design["MadeID"].ToString().Split('-')[0];
                    String price = uc.ArrangePrice(design["PriceInterval"].ToString());

                    <div class="col-md-12 col-sm-12 col-xs-12 item" style="padding:2.5%; float:left;">
                        <a  href="@Url.Action("Tasarim", "Home", new { type = designType, designName = designName })">
                            <div class="new-product-wrapper" style="padding:1%;">
                                <img class="new-product-img" alt="ürün tasarım pasta" src="@img" onclick="$(this).parent().parent().submit()" />
                                <div class="new-product-div">
                                    <span class="new-product-name">@design["Name"]</span>
                                    <span class="new-product-description">@design["SizeOptions"] kişilik</span>
                                    <span class="new-product-price"> @price.Split('.')[0] <span style="font-size:16px; margin-left:-7px;">.@price.Split('.')[1] TL</span></span>
                                </div>
                            </div>
                        </a>
                    </div>
                }
            }
        </div>
    </div>

</div>
